$n          = 300
// number of particles, same as in HTML
$d          = 30px
// particle diameter
$r-sphere   = 300px
$n-rainbows = 2
$n-rounds   = 7
$base-a     = 360deg / $n
$base-ay    = $n-rounds * $base-a
$base-ax    = 0.5 * $base-a
$t          = 12s


body
  overflow: hidden
  background: #000
#main
  position: absolute
  top: 0
  left: 0
.sphere
  position: absolute
  top: 50%
  left: 50%
  transform-style: preserve-3d
  animation: spin $t linear infinite
.particle
  transform-style: preserve-3d
  position: absolute
  top: 50%
  left: 50%
  margin: (-0.5 * $d)
  width: $d
  height: $d
  // border-radius: 50%
  opacity: .9
  background: currentColor
  // animation: fade 0.5 * $t ease-in infinite alternate
  for $i in (0)..(($n) - 1)
    $hue = $i * $n-rainbows * $base-a
    $sf = 1 - abs(0.5 * ($n - 1) - $i) / $n
    &:nth-child({$i + 1})
      transform: rotateY($i * $base-ay) rotateX($i * $base-ax - 90deg) translateZ($r-sphere) scale($sf)
      color: hsl($hue, 100%, 65%)


@keyframes spin
  0%
    transform: rotateY(0deg)
  100%
    transform: rotateY(360deg)